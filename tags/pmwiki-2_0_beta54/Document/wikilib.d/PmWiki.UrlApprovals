version=pmwiki-2.0.beta44 ordered=1
newline=²
agent=Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.6) Gecko/20050317 Firefox/1.0.2
author=Pm
host=24.1.26.255
name=PmWiki.UrlApprovals
rev=18
targets=Category.DocumentationToDo,Site.ApprovedUrls,Profiles.Pm,PmWiki.URLs,PmWiki.AvailableActions,PmWiki.DocumentationIndex,PmWiki.Variables
text=%Pm% [[!Documentation ToDo]] - this page needs to be made more clear.  I think that it should start by ignoring $WhiteUrlPatterns and simply focusing on the use of the [[Site.ApprovedUrls]] page and how to set that up. Then after that's described it can mention how additional URLs can be added using $WhiteUrlPatterns.  At any rate, the description is not very clear.  A better starting point might be the documentation that's in the ''urlapprove.php'' script itself.  --[[~Pm]]²²----²²²²A script ''urlapprove.php'' for approval of Internet addresses (URL) is supplied with the standard distribution. To activate it, you have to add to the local/config.php file: ² [=include_once('scripts/urlapprove.php');=]²²You will then approve `URLs while adding them to a "white list" defined in the variable $WhiteUrlPatterns which is set in the  local/config.php file.\\²To add multiples `URLs, use the separator | . By example:² [=$WhiteUrlPatterns =²   "http://example.com/|http://example.net/|http://example.org/";=]²To add all `URLs from, say New Zealand and Australia, use² [=$WhiteUrlPatterns[] = 'http://[^/]+\\.nz';² $WhiteUrlPatterns[] = 'http://[^/]+\\.au';=]²²This white list is also completed by loading the content of the ''`Site.ApprovedUrls'' page. ²²Following a non-approved link will be displayed a message ''"(Approve sites)"''. A click on this message will approve all sites of the page, if you have writing rights on the ''`Site.ApprovedUrls'' page.²²If you want to change the name of this page write in local/config.php (after the script inclusion line):² [= $ApprovedUrlPagesFmt = array('OtherGroup.OtherName');=]²Generally, it might be ² [= array('$DefaultGroup.ApprovedUrls');=]²²You can limit the number of unapproved links per page. If the number is exceeded, the page cannot be posted. This is useful because spammers write long link lists. To activate this limit write in the local/config.php file the next line (value 5 is only for example):²  $UnapprovedLinkCountMax = 5; #by default 100000²²You can also make `PmWiki display a disapproval message defined in the $UnapprovedLinkFmt variable, by example:² [=$UnapprovedLinkFmt = ²  "<b>Address not displayed before approval</b>²   <a class='apprlink' href='\$PageUrl?action=approvesites'>²   $[(approve sites)]</a>";²=]²This is not very useful for the person in charge of links approval, so use it only if really required, or if you wish to totally forbid link addition. In that case, the message can simply be:²  $UnapprovedLinkFmt = "<b>No link allowed</b>";²²!! Caveat - impossible to improve links in the [=sidebar=] directly²²Please note that in general you need to go to the sidebar page in order to approve links in the sidebar. The reason for this is that the approve mechanism only approves links on the ''current'' page.²²²----²%trail%<<|[[DocumentationIndex]]|>>²
time=1121013838
